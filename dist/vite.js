var zJ=44,WJ=59,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(64),HJ=new Uint8Array(128);for(let J=0;J<a.length;J++){let Q=a.charCodeAt(J);t[J]=Q,HJ[Q]=J}function S(J,Q,X){let Z=Q-X;Z=Z<0?-Z<<1|1:Z<<1;do{let $=Z&31;if(Z>>>=5,Z>0)$|=32;J.write(t[$])}while(Z>0);return Q}var s=16384,r=typeof TextDecoder!=="undefined"?new TextDecoder:typeof Buffer!=="undefined"?{decode(J){return Buffer.from(J.buffer,J.byteOffset,J.byteLength).toString()}}:{decode(J){let Q="";for(let X=0;X<J.length;X++)Q+=String.fromCharCode(J[X]);return Q}},FJ=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(s)}write(J){let{buffer:Q}=this;if(Q[this.pos++]=J,this.pos===s)this.out+=r.decode(Q),this.pos=0}flush(){let{buffer:J,out:Q,pos:X}=this;return X>0?Q+r.decode(J.subarray(0,X)):Q}};function n(J){let Q=new FJ,X=0,Z=0,$=0,Y=0;for(let z=0;z<J.length;z++){let W=J[z];if(z>0)Q.write(WJ);if(W.length===0)continue;let F=0;for(let H=0;H<W.length;H++){let q=W[H];if(H>0)Q.write(zJ);if(F=S(Q,q[0],F),q.length===1)continue;if(X=S(Q,q[1],X),Z=S(Q,q[2],Z),$=S(Q,q[3],$),q.length===4)continue;Y=S(Q,q[4],Y)}}return Q.flush()}class m{constructor(J){this.bits=J instanceof m?J.bits.slice():[]}add(J){this.bits[J>>5]|=1<<(J&31)}has(J){return!!(this.bits[J>>5]&1<<(J&31))}}class I{constructor(J,Q,X){this.start=J,this.end=Q,this.original=X,this.intro="",this.outro="",this.content=X,this.storeName=!1,this.edited=!1,this.previous=null,this.next=null}appendLeft(J){this.outro+=J}appendRight(J){this.intro=this.intro+J}clone(){let J=new I(this.start,this.end,this.original);return J.intro=this.intro,J.outro=this.outro,J.content=this.content,J.storeName=this.storeName,J.edited=this.edited,J}contains(J){return this.start<J&&J<this.end}eachNext(J){let Q=this;while(Q)J(Q),Q=Q.next}eachPrevious(J){let Q=this;while(Q)J(Q),Q=Q.previous}edit(J,Q,X){if(this.content=J,!X)this.intro="",this.outro="";return this.storeName=Q,this.edited=!0,this}prependLeft(J){this.outro=J+this.outro}prependRight(J){this.intro=J+this.intro}reset(){if(this.intro="",this.outro="",this.edited)this.content=this.original,this.storeName=!1,this.edited=!1}split(J){let Q=J-this.start,X=this.original.slice(0,Q),Z=this.original.slice(Q);this.original=X;let $=new I(J,this.end,Z);if($.outro=this.outro,this.outro="",this.end=J,this.edited)$.edit("",!1),this.content="";else this.content=X;if($.next=this.next,$.next)$.next.previous=$;return $.previous=this,this.next=$,$}toString(){return this.intro+this.content+this.outro}trimEnd(J){if(this.outro=this.outro.replace(J,""),this.outro.length)return!0;let Q=this.content.replace(J,"");if(Q.length){if(Q!==this.content){if(this.split(this.start+Q.length).edit("",void 0,!0),this.edited)this.edit(Q,this.storeName,!0)}return!0}else if(this.edit("",void 0,!0),this.intro=this.intro.replace(J,""),this.intro.length)return!0}trimStart(J){if(this.intro=this.intro.replace(J,""),this.intro.length)return!0;let Q=this.content.replace(J,"");if(Q.length){if(Q!==this.content){let X=this.split(this.end-Q.length);if(this.edited)X.edit(Q,this.storeName,!0);this.edit("",void 0,!0)}return!0}else if(this.edit("",void 0,!0),this.outro=this.outro.replace(J,""),this.outro.length)return!0}}function qJ(){if(typeof globalThis!=="undefined"&&typeof globalThis.btoa==="function")return(J)=>globalThis.btoa(unescape(encodeURIComponent(J)));else if(typeof Buffer==="function")return(J)=>Buffer.from(J,"utf-8").toString("base64");else return()=>{throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")}}var AJ=qJ();class JJ{constructor(J){if(this.version=3,this.file=J.file,this.sources=J.sources,this.sourcesContent=J.sourcesContent,this.names=J.names,this.mappings=n(J.mappings),typeof J.x_google_ignoreList!=="undefined")this.x_google_ignoreList=J.x_google_ignoreList;if(typeof J.debugId!=="undefined")this.debugId=J.debugId}toString(){return JSON.stringify(this)}toUrl(){return"data:application/json;charset=utf-8;base64,"+AJ(this.toString())}}function GJ(J){let Q=J.split(`
`),X=Q.filter((Y)=>/^\t+/.test(Y)),Z=Q.filter((Y)=>/^ {2,}/.test(Y));if(X.length===0&&Z.length===0)return null;if(X.length>=Z.length)return"\t";let $=Z.reduce((Y,z)=>{let W=/^ +/.exec(z)[0].length;return Math.min(W,Y)},1/0);return new Array($+1).join(" ")}function KJ(J,Q){let X=J.split(/[/\\]/),Z=Q.split(/[/\\]/);X.pop();while(X[0]===Z[0])X.shift(),Z.shift();if(X.length){let $=X.length;while($--)X[$]=".."}return X.concat(Z).join("/")}var UJ=Object.prototype.toString;function jJ(J){return UJ.call(J)==="[object Object]"}function e(J){let Q=J.split(`
`),X=[];for(let Z=0,$=0;Z<Q.length;Z++)X.push($),$+=Q[Z].length+1;return function Z($){let Y=0,z=X.length;while(Y<z){let H=Y+z>>1;if($<X[H])z=H;else Y=H+1}let W=Y-1,F=$-X[W];return{line:W,column:F}}}var _J=/\w/;class QJ{constructor(J){this.hires=J,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null}addEdit(J,Q,X,Z){if(Q.length){let $=Q.length-1,Y=Q.indexOf(`
`,0),z=-1;while(Y>=0&&$>Y){let F=[this.generatedCodeColumn,J,X.line,X.column];if(Z>=0)F.push(Z);this.rawSegments.push(F),this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,z=Y,Y=Q.indexOf(`
`,Y+1)}let W=[this.generatedCodeColumn,J,X.line,X.column];if(Z>=0)W.push(Z);this.rawSegments.push(W),this.advance(Q.slice(z+1))}else if(this.pending)this.rawSegments.push(this.pending),this.advance(Q);this.pending=null}addUneditedChunk(J,Q,X,Z,$){let Y=Q.start,z=!0,W=!1;while(Y<Q.end){if(X[Y]===`
`)Z.line+=1,Z.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,z=!0,W=!1;else{if(this.hires||z||$.has(Y)){let F=[this.generatedCodeColumn,J,Z.line,Z.column];if(this.hires==="boundary")if(_J.test(X[Y])){if(!W)this.rawSegments.push(F),W=!0}else this.rawSegments.push(F),W=!1;else this.rawSegments.push(F)}Z.column+=1,this.generatedCodeColumn+=1,z=!1}Y+=1}this.pending=null}advance(J){if(!J)return;let Q=J.split(`
`);if(Q.length>1){for(let X=0;X<Q.length-1;X++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=Q[Q.length-1].length}}var f=`
`,L={insertLeft:!1,insertRight:!1,storeName:!1};class h{constructor(J,Q={}){let X=new I(0,J.length,J);Object.defineProperties(this,{original:{writable:!0,value:J},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:X},lastChunk:{writable:!0,value:X},lastSearchedChunk:{writable:!0,value:X},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:Q.filename},indentExclusionRanges:{writable:!0,value:Q.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new m},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:void 0},ignoreList:{writable:!0,value:Q.ignoreList},offset:{writable:!0,value:Q.offset||0}}),this.byStart[0]=X,this.byEnd[J.length]=X}addSourcemapLocation(J){this.sourcemapLocations.add(J)}append(J){if(typeof J!=="string")throw new TypeError("outro content must be a string");return this.outro+=J,this}appendLeft(J,Q){if(J=J+this.offset,typeof Q!=="string")throw new TypeError("inserted content must be a string");this._split(J);let X=this.byEnd[J];if(X)X.appendLeft(Q);else this.intro+=Q;return this}appendRight(J,Q){if(J=J+this.offset,typeof Q!=="string")throw new TypeError("inserted content must be a string");this._split(J);let X=this.byStart[J];if(X)X.appendRight(Q);else this.outro+=Q;return this}clone(){let J=new h(this.original,{filename:this.filename,offset:this.offset}),Q=this.firstChunk,X=J.firstChunk=J.lastSearchedChunk=Q.clone();while(Q){J.byStart[X.start]=X,J.byEnd[X.end]=X;let Z=Q.next,$=Z&&Z.clone();if($)X.next=$,$.previous=X,X=$;Q=Z}if(J.lastChunk=X,this.indentExclusionRanges)J.indentExclusionRanges=this.indentExclusionRanges.slice();return J.sourcemapLocations=new m(this.sourcemapLocations),J.intro=this.intro,J.outro=this.outro,J}generateDecodedMap(J){J=J||{};let Q=0,X=Object.keys(this.storedNames),Z=new QJ(J.hires),$=e(this.original);if(this.intro)Z.advance(this.intro);if(this.firstChunk.eachNext((Y)=>{let z=$(Y.start);if(Y.intro.length)Z.advance(Y.intro);if(Y.edited)Z.addEdit(Q,Y.content,z,Y.storeName?X.indexOf(Y.original):-1);else Z.addUneditedChunk(Q,Y,this.original,z,this.sourcemapLocations);if(Y.outro.length)Z.advance(Y.outro)}),this.outro)Z.advance(this.outro);return{file:J.file?J.file.split(/[/\\]/).pop():void 0,sources:[J.source?KJ(J.file||"",J.source):J.file||""],sourcesContent:J.includeContent?[this.original]:void 0,names:X,mappings:Z.raw,x_google_ignoreList:this.ignoreList?[Q]:void 0}}generateMap(J){return new JJ(this.generateDecodedMap(J))}_ensureindentStr(){if(this.indentStr===void 0)this.indentStr=GJ(this.original)}_getRawIndentString(){return this._ensureindentStr(),this.indentStr}getIndentString(){return this._ensureindentStr(),this.indentStr===null?"\t":this.indentStr}indent(J,Q){let X=/^[^\r\n]/gm;if(jJ(J))Q=J,J=void 0;if(J===void 0)this._ensureindentStr(),J=this.indentStr||"\t";if(J==="")return this;Q=Q||{};let Z={};if(Q.exclude)(typeof Q.exclude[0]==="number"?[Q.exclude]:Q.exclude).forEach((H)=>{for(let q=H[0];q<H[1];q+=1)Z[q]=!0});let $=Q.indentStart!==!1,Y=(F)=>{if($)return`${J}${F}`;return $=!0,F};this.intro=this.intro.replace(X,Y);let z=0,W=this.firstChunk;while(W){let F=W.end;if(W.edited){if(!Z[z]){if(W.content=W.content.replace(X,Y),W.content.length)$=W.content[W.content.length-1]===`
`}}else{z=W.start;while(z<F){if(!Z[z]){let H=this.original[z];if(H===`
`)$=!0;else if(H!=="\r"&&$)if($=!1,z===W.start)W.prependRight(J);else this._splitChunk(W,z),W=W.next,W.prependRight(J)}z+=1}}z=W.end,W=W.next}return this.outro=this.outro.replace(X,Y),this}insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")}insertLeft(J,Q){if(!L.insertLeft)console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),L.insertLeft=!0;return this.appendLeft(J,Q)}insertRight(J,Q){if(!L.insertRight)console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),L.insertRight=!0;return this.prependRight(J,Q)}move(J,Q,X){if(J=J+this.offset,Q=Q+this.offset,X=X+this.offset,X>=J&&X<=Q)throw new Error("Cannot move a selection inside itself");this._split(J),this._split(Q),this._split(X);let Z=this.byStart[J],$=this.byEnd[Q],Y=Z.previous,z=$.next,W=this.byStart[X];if(!W&&$===this.lastChunk)return this;let F=W?W.previous:this.lastChunk;if(Y)Y.next=z;if(z)z.previous=Y;if(F)F.next=Z;if(W)W.previous=$;if(!Z.previous)this.firstChunk=$.next;if(!$.next)this.lastChunk=Z.previous,this.lastChunk.next=null;if(Z.previous=F,$.next=W||null,!F)this.firstChunk=Z;if(!W)this.lastChunk=$;return this}overwrite(J,Q,X,Z){return Z=Z||{},this.update(J,Q,X,{...Z,overwrite:!Z.contentOnly})}update(J,Q,X,Z){if(J=J+this.offset,Q=Q+this.offset,typeof X!=="string")throw new TypeError("replacement content must be a string");if(this.original.length!==0){while(J<0)J+=this.original.length;while(Q<0)Q+=this.original.length}if(Q>this.original.length)throw new Error("end is out of bounds");if(J===Q)throw new Error("Cannot overwrite a zero-length range – use appendLeft or prependRight instead");if(this._split(J),this._split(Q),Z===!0){if(!L.storeName)console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),L.storeName=!0;Z={storeName:!0}}let $=Z!==void 0?Z.storeName:!1,Y=Z!==void 0?Z.overwrite:!1;if($){let F=this.original.slice(J,Q);Object.defineProperty(this.storedNames,F,{writable:!0,value:!0,enumerable:!0})}let z=this.byStart[J],W=this.byEnd[Q];if(z){let F=z;while(F!==W){if(F.next!==this.byStart[F.end])throw new Error("Cannot overwrite across a split point");F=F.next,F.edit("",!1)}z.edit(X,$,!Y)}else{let F=new I(J,Q,"").edit(X,$);W.next=F,F.previous=W}return this}prepend(J){if(typeof J!=="string")throw new TypeError("outro content must be a string");return this.intro=J+this.intro,this}prependLeft(J,Q){if(J=J+this.offset,typeof Q!=="string")throw new TypeError("inserted content must be a string");this._split(J);let X=this.byEnd[J];if(X)X.prependLeft(Q);else this.intro=Q+this.intro;return this}prependRight(J,Q){if(J=J+this.offset,typeof Q!=="string")throw new TypeError("inserted content must be a string");this._split(J);let X=this.byStart[J];if(X)X.prependRight(Q);else this.outro=Q+this.outro;return this}remove(J,Q){if(J=J+this.offset,Q=Q+this.offset,this.original.length!==0){while(J<0)J+=this.original.length;while(Q<0)Q+=this.original.length}if(J===Q)return this;if(J<0||Q>this.original.length)throw new Error("Character is out of bounds");if(J>Q)throw new Error("end must be greater than start");this._split(J),this._split(Q);let X=this.byStart[J];while(X)X.intro="",X.outro="",X.edit(""),X=Q>X.end?this.byStart[X.end]:null;return this}reset(J,Q){if(J=J+this.offset,Q=Q+this.offset,this.original.length!==0){while(J<0)J+=this.original.length;while(Q<0)Q+=this.original.length}if(J===Q)return this;if(J<0||Q>this.original.length)throw new Error("Character is out of bounds");if(J>Q)throw new Error("end must be greater than start");this._split(J),this._split(Q);let X=this.byStart[J];while(X)X.reset(),X=Q>X.end?this.byStart[X.end]:null;return this}lastChar(){if(this.outro.length)return this.outro[this.outro.length-1];let J=this.lastChunk;do{if(J.outro.length)return J.outro[J.outro.length-1];if(J.content.length)return J.content[J.content.length-1];if(J.intro.length)return J.intro[J.intro.length-1]}while(J=J.previous);if(this.intro.length)return this.intro[this.intro.length-1];return""}lastLine(){let J=this.outro.lastIndexOf(f);if(J!==-1)return this.outro.substr(J+1);let Q=this.outro,X=this.lastChunk;do{if(X.outro.length>0){if(J=X.outro.lastIndexOf(f),J!==-1)return X.outro.substr(J+1)+Q;Q=X.outro+Q}if(X.content.length>0){if(J=X.content.lastIndexOf(f),J!==-1)return X.content.substr(J+1)+Q;Q=X.content+Q}if(X.intro.length>0){if(J=X.intro.lastIndexOf(f),J!==-1)return X.intro.substr(J+1)+Q;Q=X.intro+Q}}while(X=X.previous);if(J=this.intro.lastIndexOf(f),J!==-1)return this.intro.substr(J+1)+Q;return this.intro+Q}slice(J=0,Q=this.original.length-this.offset){if(J=J+this.offset,Q=Q+this.offset,this.original.length!==0){while(J<0)J+=this.original.length;while(Q<0)Q+=this.original.length}let X="",Z=this.firstChunk;while(Z&&(Z.start>J||Z.end<=J)){if(Z.start<Q&&Z.end>=Q)return X;Z=Z.next}if(Z&&Z.edited&&Z.start!==J)throw new Error(`Cannot use replaced character ${J} as slice start anchor.`);let $=Z;while(Z){if(Z.intro&&($!==Z||Z.start===J))X+=Z.intro;let Y=Z.start<Q&&Z.end>=Q;if(Y&&Z.edited&&Z.end!==Q)throw new Error(`Cannot use replaced character ${Q} as slice end anchor.`);let z=$===Z?J-Z.start:0,W=Y?Z.content.length+Q-Z.end:Z.content.length;if(X+=Z.content.slice(z,W),Z.outro&&(!Y||Z.end===Q))X+=Z.outro;if(Y)break;Z=Z.next}return X}snip(J,Q){let X=this.clone();return X.remove(0,J),X.remove(Q,X.original.length),X}_split(J){if(this.byStart[J]||this.byEnd[J])return;let Q=this.lastSearchedChunk,X=Q,Z=J>Q.end;while(Q){if(Q.contains(J))return this._splitChunk(Q,J);if(Q=Z?this.byStart[Q.end]:this.byEnd[Q.start],Q===X)return;X=Q}}_splitChunk(J,Q){if(J.edited&&J.content.length){let Z=e(this.original)(Q);throw new Error(`Cannot split a chunk that has already been edited (${Z.line}:${Z.column} – "${J.original}")`)}let X=J.split(Q);if(this.byEnd[Q]=J,this.byStart[Q]=X,this.byEnd[X.end]=X,J===this.lastChunk)this.lastChunk=X;return this.lastSearchedChunk=J,!0}toString(){let J=this.intro,Q=this.firstChunk;while(Q)J+=Q.toString(),Q=Q.next;return J+this.outro}isEmpty(){let J=this.firstChunk;do if(J.intro.length&&J.intro.trim()||J.content.length&&J.content.trim()||J.outro.length&&J.outro.trim())return!1;while(J=J.next);return!0}length(){let J=this.firstChunk,Q=0;do Q+=J.intro.length+J.content.length+J.outro.length;while(J=J.next);return Q}trimLines(){return this.trim("[\\r\\n]")}trim(J){return this.trimStart(J).trimEnd(J)}trimEndAborted(J){let Q=new RegExp((J||"\\s")+"+$");if(this.outro=this.outro.replace(Q,""),this.outro.length)return!0;let X=this.lastChunk;do{let Z=X.end,$=X.trimEnd(Q);if(X.end!==Z){if(this.lastChunk===X)this.lastChunk=X.next;this.byEnd[X.end]=X,this.byStart[X.next.start]=X.next,this.byEnd[X.next.end]=X.next}if($)return!0;X=X.previous}while(X);return!1}trimEnd(J){return this.trimEndAborted(J),this}trimStartAborted(J){let Q=new RegExp("^"+(J||"\\s")+"+");if(this.intro=this.intro.replace(Q,""),this.intro.length)return!0;let X=this.firstChunk;do{let Z=X.end,$=X.trimStart(Q);if(X.end!==Z){if(X===this.lastChunk)this.lastChunk=X.next;this.byEnd[X.end]=X,this.byStart[X.next.start]=X.next,this.byEnd[X.next.end]=X.next}if($)return!0;X=X.next}while(X);return!1}trimStart(J){return this.trimStartAborted(J),this}hasChanged(){return this.original!==this.toString()}_replaceRegexp(J,Q){function X($,Y){if(typeof Q==="string")return Q.replace(/\$(\$|&|\d+)/g,(z,W)=>{if(W==="$")return"$";if(W==="&")return $[0];if(+W<$.length)return $[+W];return`$${W}`});else return Q(...$,$.index,Y,$.groups)}function Z($,Y){let z,W=[];while(z=$.exec(Y))W.push(z);return W}if(J.global)Z(J,this.original).forEach((Y)=>{if(Y.index!=null){let z=X(Y,this.original);if(z!==Y[0])this.overwrite(Y.index,Y.index+Y[0].length,z)}});else{let $=this.original.match(J);if($&&$.index!=null){let Y=X($,this.original);if(Y!==$[0])this.overwrite($.index,$.index+$[0].length,Y)}}return this}_replaceString(J,Q){let{original:X}=this,Z=X.indexOf(J);if(Z!==-1){if(typeof Q==="function")Q=Q(J,Z,X);if(J!==Q)this.overwrite(Z,Z+J.length,Q)}return this}replace(J,Q){if(typeof J==="string")return this._replaceString(J,Q);return this._replaceRegexp(J,Q)}_replaceAllString(J,Q){let{original:X}=this,Z=J.length;for(let $=X.indexOf(J);$!==-1;$=X.indexOf(J,$+Z)){let Y=X.slice($,$+Z),z=Q;if(typeof Q==="function")z=Q(Y,$,X);if(Y!==z)this.overwrite($,$+Z,z)}return this}replaceAll(J,Q){if(typeof J==="string")return this._replaceAllString(J,Q);if(!J.global)throw new TypeError("MagicString.prototype.replaceAll called with a non-global RegExp argument");return this._replaceRegexp(J,Q)}}function d(J=""){let Q=J.length,X=Q^Q,Z=0,$;while(Q>=4)$=J.charCodeAt(Z)&255|(J.charCodeAt(++Z)&255)<<8|(J.charCodeAt(++Z)&255)<<16|(J.charCodeAt(++Z)&255)<<24,$=($&65535)*1540483477+((($>>>16)*1540483477&65535)<<16),$^=$>>>24,$=($&65535)*1540483477+((($>>>16)*1540483477&65535)<<16),X=(X&65535)*1540483477+(((X>>>16)*1540483477&65535)<<16)^$,Q-=4,++Z;if(Q>=3)X^=(J.charCodeAt(Z+2)&255)<<16;if(Q>=2)X^=(J.charCodeAt(Z+1)&255)<<8;if(Q>=1)X^=J.charCodeAt(Z)&255,X=(X&65535)*1540483477+(((X>>>16)*1540483477&65535)<<16);return X^=X>>>13,X=(X&65535)*1540483477+(((X>>>16)*1540483477&65535)<<16),X^=X>>>15,(X>>>0).toString(36)}function o(J){return/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(J)}function P(J){return JSON.stringify(J)}function XJ(J){return(J.split("/").pop()||"unknown").replace(/\.[^.]+$/,"").replace(/[^a-zA-Z0-9]/g,"")}function OJ(J={}){let{classPrefix:Q="ss",debug:X,cssOutput:Z="auto"}=J,$=X??process.env.DEBUG_STYLED_STATIC==="true",Y=new Map,z,W=!1,F="virtual";return{name:"styled-static",enforce:"post",configResolved(H){if(z=H,W=z.command==="serve",Z==="auto")F=z.build?.lib?"file":"virtual";else F=Z;if($)console.log(`[styled-static] CSS output mode: ${F} (config: ${Z}, isLib: ${!!z.build?.lib})`)},resolveId(H){if(H.startsWith("virtual:styled-static/"))return"\x00"+H;if(H.startsWith("\x00virtual:styled-static/"))return H;return null},load(H){if(H.startsWith("\x00virtual:styled-static/")){let A=H.slice(1).replace(/\.(css|js)$/,".css"),j=Y.get(A),G=j?.css??"";if(W){let K=j?.sourceFile??"",_=K?`${G}
/*# sourceURL=${K} */`:G;return`
const id = ${JSON.stringify(A)};
const css = ${JSON.stringify(_)};

// Remove existing style for this module (HMR cleanup)
const existing = document.querySelector(\`style[data-ss-id="\${id}"]\`);
if (existing) existing.remove();

const style = document.createElement('style');
style.setAttribute('data-ss-id', id);
style.textContent = css;
document.head.appendChild(style);

if (import.meta.hot) {
  import.meta.hot.accept();
}

export default css;
`}if(F==="file")return"";return G}return null},handleHotUpdate({file:H,server:q}){if(/\.[tj]sx?$/.test(H)){let A=c(H);for(let[j]of Y)if(j.includes(A)){let G=q.moduleGraph.getModuleById(`\x00${j}`);if(G)q.moduleGraph.invalidateModule(G)}}},async transform(H,q){if(!/\.[cm]?[jt]sx?$/.test(q)||/node_modules/.test(q))return null;let A=H.includes("styled-static"),j=H.includes('from "./index"')||H.includes("from './index'")||H.includes('from "../index"')||H.includes("from '../index'");if(!A&&!j)return null;if($)console.log("[styled-static] Transforming:",q);let G;try{if(G=this.parse(H),$)console.log("[styled-static] AST parsed successfully, body length:",G.body.length)}catch(U){if($)console.log("[styled-static] AST parse error:",U);return null}let K=DJ(G);if($)console.log("[styled-static] Found imports:",K);let _=K.css||K.styled||K.createGlobalStyle||K.keyframes,O=K.styledVariants||K.cssVariants,E=!!K.withComponent;if(!_&&!O&&!E){if($)console.log("[styled-static] No imports found, skipping");return null}let T=_?EJ(G,K,H):[];if($)console.log("[styled-static] Found templates:",T.length);let B=O?MJ(G,H,K):[];if($)console.log("[styled-static] Found variant calls:",B.length);let p=E?bJ(G,K):[];if($)console.log("[styled-static] Found withComponent calls:",p.length);if(T.length===0&&B.length===0&&p.length===0){if($)console.log("[styled-static] No templates, variants, or withComponent found, skipping");return null}let N=new h(H),v=[],C=!1,i=0;for(let U=0;U<T.length;U++){let D=T[U];if(!D)continue;let R=RJ(H,D.node.quasi),M;if(W&&D.variableName){let w=XJ(q);M=`${Q}-${D.variableName}-${w}`}else{let w=W?6:8,u=d(R).slice(0,w);M=`${Q}-${u}`}let x=D.type==="createGlobalStyle"?R:`.${M} { ${R} }`,k=`virtual:styled-static/${c(q)}/${i++}`,g=`${k}.css`,b=W?`${k}.js`:g;Y.set(g,{css:x,sourceFile:q}),v.push(`import "${b}";`);let V=TJ(D,M,W);if(N.overwrite(D.node.start,D.node.end,V),D.type==="styled"||D.type==="styledExtend"||D.type==="styledAttrs")C=!0}let l=[];for(let U of B){let D;if(W&&U.variableName){let V=XJ(q);D=`${Q}-${U.variableName}-${V}`}else{let V=d(U.baseCss||"").slice(0,6);D=`${Q}-${V}`}let R="";if(U.baseCss)R+=`.${D} { ${U.baseCss} }
`;for(let[V,w]of U.variants)for(let[u,$J]of w){let YJ=`${D}--${V}-${u}`;R+=`.${YJ} { ${$J} }
`}let M=`virtual:styled-static/${c(q)}/${i++}`,x=`${M}.css`,k=W?`${M}.js`:x;Y.set(x,{css:R,sourceFile:q}),v.push(`import "${k}";`);let g=Array.from(U.variants.keys()),b=LJ(U,D,g,W);if(N.overwrite(U.start,U.end,b.code),b.hoisted)l.push(b.hoisted);if(U.type==="styledVariants")C=!0}for(let U of p){if(!o(U.fromComponent))throw new Error(`[styled-static] Invalid fromComponent name: ${U.fromComponent}`);let D=/^[a-z]/.test(U.toComponent),R;if(D)R=`Object.assign((p) => createElement(${P(U.toComponent)}, {...p, className: m(${U.fromComponent}.className, p.className)}), { className: ${U.fromComponent}.className })`;else{if(!o(U.toComponent))throw new Error(`[styled-static] Invalid toComponent name: ${U.toComponent}`);R=`Object.assign((p) => createElement(${U.toComponent}, {...p, className: m(${U.fromComponent}.className, p.className)}), { className: ${U.fromComponent}.className })`}N.overwrite(U.start,U.end,R),C=!0}let ZJ=K.source==="./index"||K.source==="../index"?K.source.replace("/index","/runtime"):"@alex.radulescu/styled-static/runtime",y="";if(v.length>0)y+=v.join(`
`)+`
`;if(C)y+=`import { createElement } from "react";
`,y+=`import { m } from "${ZJ}";
`;if(l.length>0)y+=l.join(`
`)+`
`;if(y)N.prepend(y+`
`);return{code:N.toString(),map:N.generateMap({hires:!0})}},generateBundle(H,q){if(F!=="file")return;for(let[A,j]of Object.entries(q)){if(j.type!=="chunk")continue;let G=j.moduleIds||[],K="";for(let O of G)for(let[,E]of Y)if(E.sourceFile===O)K+=E.css+`
`;if(!K.trim())continue;let _=A.replace(/\.js$/,".css");if(this.emitFile({type:"asset",fileName:_,source:K.trim()}),j.code=PJ(j.code,_),$)console.log(`[styled-static] Emitted CSS file: ${_}`)}}}}function DJ(J){let Q={};for(let X of J.body)if(X.type==="ImportDeclaration"){let Z=X.source.value;if(Z==="@alex.radulescu/styled-static"||Z==="./index"||Z==="../index"){Q.source=Z;for(let Y of X.specifiers)if(Y.type==="ImportSpecifier"){let z=Y.imported.name,W=Y.local.name;if(z==="styled")Q.styled=W;if(z==="css")Q.css=W;if(z==="createGlobalStyle")Q.createGlobalStyle=W;if(z==="keyframes")Q.keyframes=W;if(z==="styledVariants")Q.styledVariants=W;if(z==="cssVariants")Q.cssVariants=W;if(z==="withComponent")Q.withComponent=W}}}return Q}function EJ(J,Q,X){let Z=[];function $(Y){for(let z of Y.declarations)if(z.init?.type==="TaggedTemplateExpression"&&z.id.type==="Identifier"){let W=z.init,F=z.id.name,H=BJ(W,Q,F,X);if(H)Z.push(H)}}for(let Y of J.body){if(Y.type==="VariableDeclaration")$(Y);if(Y.type==="ExportNamedDeclaration"&&Y.declaration?.type==="VariableDeclaration")$(Y.declaration)}return Z}function BJ(J,Q,X,Z){let{tag:$}=J;if($.type==="MemberExpression"&&$.object.type==="Identifier"&&$.object.name===Q.styled&&$.property.type==="Identifier")return{type:"styled",node:J,tag:$.property.name,variableName:X};if($.type==="CallExpression"&&$.callee.type==="Identifier"&&$.callee.name===Q.styled&&$.arguments[0]?.type==="Identifier")return{type:"styledExtend",node:J,tag:"",baseComponent:$.arguments[0].name,variableName:X};if($.type==="Identifier"&&$.name===Q.css)return{type:"css",node:J,tag:"",variableName:X};if($.type==="Identifier"&&$.name===Q.createGlobalStyle)return{type:"createGlobalStyle",node:J,tag:"",variableName:X};if($.type==="Identifier"&&$.name===Q.keyframes)return{type:"keyframes",node:J,tag:"",variableName:X};if($.type==="CallExpression"&&$.callee.type==="MemberExpression"&&$.callee.property.type==="Identifier"&&$.callee.property.name==="attrs"&&$.callee.object.type==="MemberExpression"&&$.callee.object.object.type==="Identifier"&&$.callee.object.object.name===Q.styled&&$.callee.object.property.type==="Identifier"&&$.arguments.length===1){let Y=$.callee.object.property.name,z=$.arguments[0],W=Z.slice(z.start,z.end);return{type:"styledAttrs",node:J,tag:Y,variableName:X,attrsArg:W}}return null}function RJ(J,Q){return J.slice(Q.start+1,Q.end-1)}function TJ(J,Q,X){let Z=P(Q);switch(J.type){case"styled":return`Object.assign((p) => createElement(${P(J.tag)}, {...p, className: m(${Z}, p.className)}), { className: ${Z} })`;case"styledExtend":return`Object.assign((p) => createElement(${J.baseComponent}, {...p, className: m(${Z}, p.className)}), { className: ${J.baseComponent}.className + " " + ${Z} })`;case"styledAttrs":return`Object.assign((p) => createElement(${P(J.tag)}, {...(${J.attrsArg??"{}"}), ...p, className: m(${Z}, p.className)}), { className: ${Z} })`;case"css":return Z;case"keyframes":return Z;case"createGlobalStyle":return"() => null"}}function c(J){return J.replace(/\\/g,"/").replace(/^\/+/,"").toLowerCase()}function PJ(J,Q){return J=J.replace(/import\s*["']virtual:styled-static[^"']*["'];?\n?/g,""),J=J.replace(/\/\*\s*empty css\s*\*\/\s*/g,""),J=J.replace(/import\s*["']@alex\.radulescu\/styled-static["'];?\n?/g,""),`import "./${Q.split("/").pop()||Q}";
${J}`}function MJ(J,Q,X){let Z=[];function $(Y){for(let z of Y.declarations)if(z.init?.type==="CallExpression"&&z.id.type==="Identifier"){let W=z.init,F=z.id.name,H=VJ(W,Q,X,F);if(H)Z.push(H)}}for(let Y of J.body){if(Y.type==="VariableDeclaration")$(Y);if(Y.type==="ExportNamedDeclaration"&&Y.declaration?.type==="VariableDeclaration")$(Y.declaration)}return Z}function VJ(J,Q,X,Z){if(J.callee.type!=="Identifier")return null;let $=J.callee.name,Y=$===X.styledVariants,z=$===X.cssVariants;if(!Y&&!z)return null;if(J.arguments.length!==1||J.arguments[0]?.type!=="ObjectExpression")return null;let W=J.arguments[0],F,H,q=new Map;for(let A of W.properties){if(A.type!=="Property"||A.key.type!=="Identifier")continue;let j=A.key.name;if(j==="component"){if(A.value.type==="Literal"&&typeof A.value.value==="string")F=A.value.value;else if(A.value.type==="Identifier")F=A.value.name}if(j==="css"){if(A.value.type==="Literal"&&typeof A.value.value==="string")H=A.value.value;else if(A.value.type==="TemplateLiteral"){let G=A.value;H=Q.slice(G.start+1,G.end-1)}else if(A.value.type==="TaggedTemplateExpression"){let G=A.value;if(G.tag.type==="Identifier"&&G.tag.name===X.css)H=Q.slice(G.quasi.start+1,G.quasi.end-1)}}if(j==="variants"&&A.value.type==="ObjectExpression")for(let G of A.value.properties){if(G.type!=="Property"||G.key.type!=="Identifier")continue;if(G.value.type!=="ObjectExpression")continue;let K=G.key.name,_=new Map;for(let O of G.value.properties){if(O.type!=="Property"||O.key.type!=="Identifier")continue;let E=O.key.name,T;if(O.value.type==="Literal"&&typeof O.value.value==="string")T=O.value.value;else if(O.value.type==="TemplateLiteral"){let B=O.value;T=Q.slice(B.start+1,B.end-1)}else if(O.value.type==="TaggedTemplateExpression"){let B=O.value;if(B.tag.type==="Identifier"&&B.tag.name===X.css)T=Q.slice(B.quasi.start+1,B.quasi.end-1)}if(T)_.set(E,T)}if(_.size>0)q.set(K,_)}}return{type:Y?"styledVariants":"cssVariants",start:J.start,end:J.end,component:F,baseCss:H,variants:q,variableName:Z}}var NJ=4,yJ=0;function LJ(J,Q,X,Z){let $=P(Q),Y=J.type==="cssVariants",W=X.reduce((A,j)=>A+(J.variants.get(j)?.size??0),0)>NJ,F=X.length>0?`{ ${X.join(", ")}, className, ...p }`:"{ className, ...p }",H,q;if(W&&X.length>0){let A=`_vm${yJ++}`,j=X.map((K)=>{let _=J.variants.get(K);if(!_)return"";let O=Array.from(_.keys()).map((E)=>`${P(E)}:${P(` ${Q}--${K}-${E}`)}`).join(",");return`${K}:{${O}}`});q=`const ${A}={${j.join(",")}};`,H=X.map((K)=>{let _=Y?`variants.${K}`:K;return`c+=${A}.${K}[${_}]||""`}).join(";")+";"}else{let A=[];for(let j of X){let G=J.variants.get(j);if(G){let K=Y?`variants.${j}`:j,_=Array.from(G.keys()).map((O,E)=>`${E===0?"if":"else if"} (${K} === ${P(O)}) c += ${P(` ${Q}--${j}-${O}`)}`).join("; ");if(_)A.push(_)}}H=A.length>0?A.join("; ")+"; ":""}if(J.type==="styledVariants")if(J.component&&/^[a-z]/.test(J.component)){if(!J.component||!/^[a-z][a-z0-9]*$/.test(J.component))throw new Error(`[styled-static] Invalid HTML tag name: ${J.component}`);let j=P(J.component);return{code:`Object.assign((${F}) => { let c = ${$}; ${H}return createElement(${j}, {...p, className: m(c, className)}); }, { className: ${$} })`,hoisted:q}}else{if(!J.component||!o(J.component))throw new Error(`[styled-static] Invalid component name: ${J.component}`);return{code:`Object.assign((${F}) => { let c = ${$}; ${H}return createElement(${J.component}, {...p, className: m(c, className)}); }, { className: ${J.component}.className + " " + ${$} })`,hoisted:q}}return{code:`(variants) => { let c = ${$}; ${H}return c; }`,hoisted:q}}function bJ(J,Q){let X=[];function Z($){for(let Y of $.declarations)if(Y.init?.type==="CallExpression"&&Y.id.type==="Identifier"){let z=Y.init,W=Y.id.name;if(z.callee.type==="Identifier"&&z.callee.name===Q.withComponent&&z.arguments.length===2){let F=z.arguments[0],H=z.arguments[1],q,A;if(F?.type==="Literal"&&typeof F.value==="string")q=F.value;else if(F?.type==="Identifier")q=F.name;if(H?.type==="Identifier")A=H.name;if(q&&A)X.push({start:z.start,end:z.end,toComponent:q,fromComponent:A,variableName:W})}}}for(let $ of J.body){if($.type==="VariableDeclaration")Z($);if($.type==="ExportNamedDeclaration"&&$.declaration?.type==="VariableDeclaration")Z($.declaration)}return X}var gJ=OJ;export{OJ as styledStatic,gJ as default};
